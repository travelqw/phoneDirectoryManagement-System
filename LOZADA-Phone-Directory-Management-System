#include <iostream>
#include <direct.h>  // For _mkdir and _chdir
#include <string>
using namespace std;

void display_files();
void create_directory();
void change_directory();

int main() {
    int selection;

    while (true) {
        cout << "\nMain Menu:\n";
        cout << "--------------------------------\n";
        cout << "1. List Files\n";
        cout << "2. Create New Directory\n";
        cout << "3. Change Working Directory\n";
        cout << "4. Exit\n";
        cout << "Select an option: ";
        cin >> selection;

        switch (selection) {
            case 1:
                display_files();
                break;
            case 2:
                create_directory();
                break;
            case 3:
                change_directory();
                break;
            case 4:
                return 0;
            default:
                cout << "Invalid option. Please try again.\n";
        }
    }
    return 0;
}

void display_files() {
    int option;

    cout << "\nFile Listing Options:\n";
    cout << "--------------------------------\n";
    cout << "1. List All Files\n";
    cout << "2. List Files by Extension\n";
    cout << "3. List Files by Pattern\n";
    cout << "Select an option: ";
    cin >> option;

    switch (option) {
        case 1:
            cout << "Listing all files:\n";
            system("dir");
            break;
        case 2: {
            string extension;
            cout << "Enter file extension (e.g., txt): ";
            cin >> extension;
            system(("dir *." + extension).c_str());
            break;
        }
        case 3: {
            string pattern;
            cout << "Enter file name pattern (e.g., file*.*): ";
            cin >> pattern;
            system(("dir " + pattern).c_str());
            break;
        }
        default:
            cout << "Invalid option. Please try again.\n";
    }
}

void create_directory() {
    string folder_name;

    cout << "\nEnter new directory name: ";
    cin >> folder_name;

    if (_mkdir(folder_name.c_str()) == 0) {
        cout << "Directory created successfully.\n";
    } else {
        cout << "Error creating directory. It may already exist or be invalid.\n";
    }
}

void change_directory() {
    int option;

    cout << "\nChange Directory Options:\n";
    cout << "--------------------------------\n";
    cout << "1. Go to Parent Directory\n";
    cout << "2. Go to Root Directory\n";
    cout << "3. Go to Specific Directory\n";
    cout << "Select an option: ";
    cin >> option;

    switch (option) {
        case 1:
            if (_chdir("..") == 0) {
                cout << "Moved to parent directory.\n";
            } else {
                cout << "Error moving to parent directory.\n";
            }
            break;
        case 2:
            if (_chdir("\\") == 0) {
                cout << "Moved to root directory.\n";
            } else {
                cout << "Error moving to root directory.\n";
            }
            break;
        case 3: {
            string target_dir;
            cout << "Enter directory name: ";
            cin >> target_dir;
            if (_chdir(target_dir.c_str()) == 0) {
                cout << "Changed to directory: " << target_dir << "\n";
            } else {
                cout << "Error changing directory. It may not exist.\n";
            }
            break;
        }
        default:
            cout << "Invalid option. Please try again.\n";
    }
}
